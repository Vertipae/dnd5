{"version":3,"sources":["utils/axiosService.js","utils/validator.js","actions/authActions.js","actions/types.js","components/layouts/Navbar.js","components/layouts/SearchBar.js","components/characters/Characters.js","utils/baseurl.js","actions/characterActions.js","components/characters/Character.js","components/settings/Settings.js","components/games/Games.js","components/games/Game.js","actions/gameActions.js","components/games/CreateGame.js","components/common/TextFieldGroup.js","components/auth/Login.js","components/auth/Register.js","components/common/Spinner.js","components/create-character/SpellsModal.js","components/create-character/CreateCharacter.js","components/dungeonmaster/DungeonMaster.js","components/layouts/WelcomeBar.js","components/games/GameInfo.js","components/games/JoinGame.js","App.js","serviceWorker.js","reducers/authReducer.js","reducers/errorReducer.js","reducers/characterReducer.js","reducers/gameReducer.js","reducers/index.js","store.js","index.js"],"names":["setToken","token","window","localStorage","setItem","axios","defaults","headers","common","removeItem","getItem","init","isEmpty","value","undefined","Object","keys","length","trim","formatErrors","errors","returnedErrors","forEach","key","msg","validateRegistration","userData","username","password","validateLogin","validateAddCharacter","characterData","name","level","race","characterClass","alignment","validateAddGame","gameData","BASE_URL","setCurrentPlayer","decoded","type","payload","withRouter","props","auth","useSelector","state","dispatch","useDispatch","history","useHistory","authLinks","className","style","marginLeft","display","flexDirection","width","justifyContent","to","color","id","location","pathname","marginRight","onClick","push","guestLinks","player","SearchBar","useState","searchTerm","setSearchTerm","searchResults","setSearchResults","characters","useEffect","results","filter","character","toLowerCase","includes","console","log","marginTop","onChange","e","target","autoComplete","placeholder","htmlFor","backgroundColor","map","item","i","_id","Characters","fontSize","textTransform","getCharacters","a","get","res","data","Character","match","params","setCharacter","characterClasses","setCharacterClasses","getClass","response","onSubmit","preventDefault","put","updateCharacter","c","index","delete","deleteCharacter","Settings","Games","games","game","Game","dungeonmaster","some","char","description","gameFile","src","atob","alt","getGames","addGame","quick","setTimeout","post","joinGame","gameId","characterId","characterSelect","deleteGame","CreateGame","setName","setDescription","file","setFile","newGame","JSON","stringify","encType","files","reader","FileReader","onload","btoa","result","readAsBinaryString","TextFieldGroup","label","error","Login","redirect","setUsername","setPassword","jwt_decode","loginUser","Register","passwordTwo","setPasswordTwo","registerUser","disabled","Spinner","modalStyle","height","SpellsModal","characterSpells","setParentSpells","parentSpells","activeSpell","setActiveSpell","spells","setSpells","collapsibleRef","useCallback","elem","M","Collapsible","onOpenStart","href","count","ref","zIndex","spell","checked","desc","CreateCharacter","setRace","setCharacterClass","setCharacterSpells","setLevel","setAlignment","getSpell","AutoInit","newCharacter","addCharacter","borderColor","DungeonMaster","WelcomeBar","marginBottom","GameInfo","secret","navigator","clipboard","writeText","JoinGame","setGame","URLSearchParams","search","getGame","defaultValue","notAuthed","App","accessToken","exact","path","component","render","Boolean","hostname","initialState","combineReducers","action","middleware","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","ReactDOM","document","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.81c98e7b.chunk.js","sourcesContent":["// Purpose of this file is to add authorization to token on every requests when user is logged in\nimport axios from \"axios\"\n\nconst init = () => {\n  const token = window.localStorage.getItem(\"accessToken\")\n  setToken(token)\n}\n\nexport const setToken = (token) => {\n  if (token) {\n    window.localStorage.setItem(\"accessToken\", token)\n    axios.defaults.headers.common[\"x-auth-token\"] = token\n  } else {\n    window.localStorage.removeItem(\"accessToken\")\n    delete axios.defaults.headers.common[\"x-auth-token\"]\n  }\n}\n\n\ninit()\n\nexport default axios\n","export const isEmpty = (value) =>\n  value === undefined ||\n  value === null ||\n  value === 0 ||\n  (typeof value === \"object\" && Object.keys(value).length === 0) || // Checking for empty object\n  (typeof value === \"string\" && value.trim().length === 0) // Checking for empty string\n\nexport const formatErrors = (errors) => {\n  const returnedErrors = {}\n  Object.keys(errors).forEach((key) => {\n    returnedErrors[key] = errors[key].msg\n  })\n\n  return returnedErrors\n}\nexport const validateRegistration = (userData) => {\n  let errors = { username: null, password: null }\n\n  if (isEmpty(userData.username)) errors.username = \"Username is required\"\n  if (userData.password.length < 6)\n    errors.password = \"Please enter a password with 6 or more characters\"\n\n  return errors\n}\n\nexport const validateLogin = (userData) => {\n  let errors = { username: null, password: null }\n\n  if (isEmpty(userData.username)) errors.username = \"Username is required\"\n  if (isEmpty(userData.password)) errors.password = \"Password is required\"\n\n  return errors\n}\n\nexport const validateAddCharacter = (characterData) => {\n  let errors = {\n    name: null,\n    level: null,\n    race: null,\n    characterClass: null,\n    alignment: null,\n  }\n  if (isEmpty(characterData.name)) errors.name = \"Name is required\"\n  if (isEmpty(characterData.level)) errors.level = \"Level is required\"\n  if (characterData.race === \"0\") errors.race = \"Race is required\"\n  if (characterData.characterClass === \"0\")\n    errors.characterClass = \"Class is required\"\n  return errors\n}\n\nexport const validateAddGame = (gameData) => {\n  let errors = {\n    name: null,\n  }\n  if (isEmpty(gameData.name)) errors.name = \"Name is required\"\n  return errors\n}\n\nexport default { isEmpty, validateRegistration, formatErrors }\n","import axios, { setToken } from \"../utils/axiosService\"\nimport jwt_decode from \"jwt-decode\"\nimport {\n  GET_ERRORS,\n  CLEAR_ERRORS,\n  SET_CURRENT_PLAYER,\n  SET_CHARACTERS,\n  SET_GAMES,\n} from \"./types\"\nimport {\n  formatErrors,\n  validateLogin,\n  validateRegistration,\n} from \"../utils/validator\"\n\nconst BASE_URL =\n  process.env.NODE_ENV === \"production\"\n    ? \"https://vankiloitajalohkuja.herokuapp.com\"\n    : \"http://localhost:5000\"\n\nexport const registerUser = (userData, history) => async (dispatch) => {\n  try {\n    const errors = validateRegistration(userData)\n    if (errors.username || errors.password) {\n      dispatch({\n        type: GET_ERRORS,\n        payload: errors,\n      })\n      setTimeout(() => {\n        // console.log(\"erroriactiontoimi\")\n        dispatch({\n          type: CLEAR_ERRORS,\n          // payload: null,\n        })\n      }, 5000)\n    } else {\n      const res = await axios.post(BASE_URL + \"/api/players\", userData)\n      setToken(res.data.token)\n      // Log player in after registration\n      const decoded = jwt_decode(res.data.token)\n      // console.log(decoded)\n      dispatch(setCurrentPlayer(decoded.player))\n      history.push(\"/home\")\n    }\n  } catch (err) {\n    console.log(err)\n    if (err.response.data.errors) {\n      const errors = formatErrors(err.response.data.errors)\n      dispatch({\n        type: GET_ERRORS,\n        payload: errors,\n      })\n    } else {\n      dispatch({\n        type: GET_ERRORS,\n        payload: err.response.data.msg,\n      })\n    }\n  }\n}\n\n// Login get user token\nexport const loginUser = (userData, history, redirect = \"/home\") => async (\n  dispatch\n) => {\n  try {\n    const errors = validateLogin(userData)\n    // console.log(\"errors_1\", errors)\n    if (errors.username || errors.password) {\n      dispatch({\n        type: GET_ERRORS,\n        payload: errors,\n      })\n      setTimeout(() => {\n        dispatch({\n          type: CLEAR_ERRORS,\n        })\n      }, 5000)\n    } else {\n      const res = await axios.post(\n        BASE_URL + \"/api/auth/login\",\n        // Se body\n        userData\n      )\n      setToken(res.data.token)\n      const decoded = jwt_decode(res.data.token)\n      dispatch(setCurrentPlayer(decoded.player))\n      if (redirect) history.push(redirect)\n    }\n  } catch (err) {\n    console.log(\"err\", err)\n    const errors = formatErrors(err.response.data.errors)\n    dispatch({\n      type: GET_ERRORS,\n      payload: errors,\n    })\n    setTimeout(() => {\n      dispatch({\n        type: CLEAR_ERRORS,\n      })\n    }, 5000)\n  }\n}\n\nexport const setCurrentPlayer = (decoded) => {\n  // console.log(decoded)\n  return {\n    type: SET_CURRENT_PLAYER,\n    payload: decoded,\n  }\n}\n\nexport const logoutUser = () => (dispatch) => {\n  // Remove token localStorage\n  setToken(null)\n  dispatch(setCurrentPlayer(null))\n  dispatch({\n    type: SET_CHARACTERS,\n    payload: [],\n  })\n  dispatch({\n    type: SET_GAMES,\n    payload: [],\n  })\n}\n","export const SET_CURRENT_PLAYER = \"SET_CURRENT_PLAYER\"\nexport const GET_ERRORS = \"GET ERRORS\"\nexport const CLEAR_ERRORS = \"CLEAR_ERRORS\"\nexport const ADD_CHARACTER = \"ADD_CHARACTER\"\nexport const SET_CHARACTERS = \"SET_CHARACTERS\"\nexport const UPDATE_CHARACTER = \"UPDATE_CHARACTER\"\nexport const DELETE_CHARACTER = \"DELETE_CHARACTER\"\nexport const ADD_GAME = \"ADD_GAME\"\nexport const SET_GAMES = \"SET_GAMES\"\nexport const DELETE_GAME = \"DELETE_GAME\"\n","// import { addListener } from \"nodemon\"\nimport React from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Link, withRouter, useHistory } from \"react-router-dom\"\nimport { logoutUser } from \"../../actions/authActions\"\n\nconst Navbar = (props) => {\n  // console.log(props.location.pathname);\n  // console.log(props);\n\n  const auth = useSelector((state) => state.auth)\n  const dispatch = useDispatch()\n\n  const history = useHistory()\n\n  const onLogoutClick = () => {\n    dispatch(logoutUser())\n    history.push(\"/\")\n  }\n\n  const authLinks = (\n    <nav>\n      <div className='nav-wrapper brown'>\n        <div\n          className='left'\n          style={{\n            marginLeft: \"15px\",\n            display: \"flex\",\n            flexDirection: \"row\",\n            width: \"5em\",\n            justifyContent: \"space-around\",\n          }}\n        >\n          <Link to='/home'>\n            <i className='fas fa-home' style={{ color: \"#fbe2dd\" }}></i>\n          </Link>\n          <Link to='/settings'>\n            <i className='material-icons' style={{ color: \"#fbe2dd\" }}>\n              settings\n            </i>\n          </Link>\n        </div>\n\n        <Link to='/home' className='brand-logo center mybrand-logo'>\n          <i className='fas fa-dragon'></i>\n          DnD5\n        </Link>\n\n        <ul id='nav-mobile' className='right hide-on-med-and-down'>\n          <li\n            className={`align-center ${\n              props.location.pathname === \"/create-character\" ? \"active\" : null\n            }`}\n          >\n            <Link to='/create-character' className='align-center'>\n              <i\n                className='material-icons'\n                style={{ color: \"Mediumslateblue\" }}\n              >\n                add\n              </i>\n              Character\n            </Link>\n          </li>\n          <li\n            className={`${\n              props.location.pathname === \"/dungeonmaster\" ? \"active\" : null\n            }`}\n          >\n            <Link to='/dungeonmaster'>Dungeon Master</Link>\n          </li>\n\n          {/* <li>\n\n        </li> */}\n          <li\n          //   className={`${\n          //     props.location.pathname === \"/logout\" ? \"active\" : null\n          //   }`}\n          // >\n          //   <Link to=\"/login\">Logout</Link>\n          >\n            <button\n              className='btn waves-effect waves-light brown'\n              style={{ marginRight: \"15px\", marginLeft: \"7px\" }}\n              onClick={onLogoutClick}\n            >\n              Logout\n            </button>\n          </li>\n        </ul>\n      </div>\n    </nav>\n  )\n\n  const guestLinks = (\n    <nav>\n      {\" \"}\n      <div className='nav-wrapper brown'>\n        <Link to='/' className='brand-logo center mybrand-logo'>\n          <i className='fas fa-dragon'></i>\n          DnD5\n        </Link>\n        {/* <Link to='/' style={{ marginLeft: \"15px\" }}>\n          <i className='fas fa-home' style={{ color: \"Mediumslateblue\" }}></i>\n        </Link> */}\n      </div>\n    </nav>\n  )\n\n  return (\n    <nav>\n      <div className='nav-wrapper brown'>\n        {auth.player ? authLinks : guestLinks}\n      </div>\n    </nav>\n  )\n}\n\nexport default withRouter(Navbar)\n","import React, { useState, useEffect } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { Link } from \"react-router-dom\"\n\nconst SearchBar = () => {\n  const [searchTerm, setSearchTerm] = useState(\"\")\n  const [searchResults, setSearchResults] = useState([])\n\n  const characters = useSelector((state) => state.characters.characters)\n\n  useEffect(() => {\n    const results = characters.filter((character) =>\n      searchTerm !== \"\"\n        ? character.name.toLowerCase().includes(searchTerm)\n        : false\n    )\n    setSearchResults(results)\n  }, [searchTerm])\n  console.log(searchResults)\n\n  return (\n    <nav style={{ marginTop: \"30px\" }} className='brown lighten-5 container'>\n      <div className='nav-wrapper'>\n        <form>\n          <div className='input-field'>\n            <input\n              id='search'\n              type='search'\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              autoComplete='off'\n              placeholder='Search character'\n            />\n            <label className='label-icon' htmlFor='search'>\n              <i className='material-icons'>search</i>\n            </label>\n            <i className='material-icons'>close</i>\n            {searchResults.length < 1 ? null : (\n              <ul className='collection' style={{ backgroundColor: \"white\" }}>\n                {searchResults.map((item, i) => (\n                  <Link key={i} to={`character/${item._id}`}>\n                    <li className='collection-item' style={{ color: \"black\" }}>\n                      {item.name}\n                    </li>\n                  </Link>\n                ))}\n              </ul>\n            )}\n          </div>\n        </form>\n      </div>\n    </nav>\n  )\n}\n\nexport default SearchBar\n","import React from \"react\"\nimport { Link } from \"react-router-dom\"\nimport { useSelector } from \"react-redux\"\n\nconst Characters = () => {\n  const characters = useSelector((state) => state.characters.characters)\n\n  // console.log(characters)\n\n  return (\n    <div className='container'>\n      <ul className='collection with-header'>\n        <li className='collection-header brown lighten-5'>\n          <h5>Characters</h5>\n        </li>\n        {characters.map((character, i) => (\n          <Link key={character._id} to={`character/${character._id}`}>\n            <li\n              className='collection-item'\n              style={{\n                fontSize: \"1.1em\",\n                marginTop: \"0.5em\",\n                backgroundColor: i % 2 !== 0 ? \"#efebe9\" : \"\",\n                textTransform: \"capitalize\",\n              }}\n            >\n              {character.name}, {character.race} {character.characterClass}\n            </li>\n          </Link>\n        ))}\n      </ul>\n    </div>\n  )\n}\n\nexport default Characters\n","const BASE_URL =\n  process.env.NODE_ENV === \"production\"\n    ? \"https://vankiloitajalohkuja.herokuapp.com\"\n    : \"http://localhost:5000\"\n\nexport default BASE_URL\n","import {\n  SET_CHARACTERS,\n  ADD_CHARACTER,\n  UPDATE_CHARACTER,\n  DELETE_CHARACTER,\n  GET_ERRORS,\n  CLEAR_ERRORS,\n} from \"./types\"\nimport axios from \"axios\"\nimport { validateAddCharacter } from \"../utils/validator\"\nimport BASE_URL from \"../utils/baseurl\"\n\nexport const addCharacter = (characterData, history) => async (dispatch) => {\n  console.log(\"ChaeactterData:\", characterData)\n  try {\n    const errors = validateAddCharacter(characterData)\n    console.log(errors)\n    if (errors.name || errors.level || errors.race || errors.characterClass) {\n      console.log(\"errorijtn\")\n      dispatch({\n        type: GET_ERRORS,\n        payload: errors,\n      })\n      setTimeout(() => {\n        // console.log(\"erroriactiontoimi\")\n        dispatch({\n          type: CLEAR_ERRORS,\n        })\n      }, 5000)\n    } else {\n      const res = await axios.post(BASE_URL + \"/api/characters\", characterData)\n      dispatch({\n        type: ADD_CHARACTER,\n        newCharacter: res.data,\n      })\n      console.log(\"Character added successfully\")\n      history.push(\"/home\")\n    }\n  } catch (err) {\n    console.log(err)\n  }\n}\n\nexport const updateCharacter = (characterData, history) => async (dispatch) => {\n  try {\n    const res = await axios.put(\n      BASE_URL + `/api/characters/${characterData._id}`,\n      characterData\n    )\n    dispatch({\n      type: UPDATE_CHARACTER,\n      payload: res.data,\n    })\n    console.log(\"Character updated successfully\")\n    history.push(\"/home\")\n  } catch (err) {\n    console.log(err)\n  }\n}\n\nexport const deleteCharacter = (id, history) => async (dispatch) => {\n  // console.log(\"DeleteAction\")\n  try {\n    const res = await axios.delete(BASE_URL + `/api/characters/${id}`)\n    dispatch({\n      type: DELETE_CHARACTER,\n      payload: res.data._id,\n    })\n    // console.log(\"Character deleted successfully\")\n    history.push(\"/home\")\n  } catch (err) {\n    console.log(err)\n    // console.log('eroririririririr')\n  }\n}\n\nexport const getCharacters = () => async (dispatch) => {\n  // console.log(\"GetCharacterAction\")\n  try {\n    const res = await axios.get(BASE_URL + \"/api/characters\")\n    // console.log(res)\n    dispatch({\n      type: SET_CHARACTERS,\n      payload: res.data,\n    })\n  } catch (err) {\n    console.log(err)\n  }\n}\n","import React, { useEffect, useState } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport {\n  deleteCharacter,\n  updateCharacter,\n} from \"../../actions/characterActions\"\nimport axios from \"axios\"\n\nconst Character = ({ match }) => {\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const [character, setCharacter] = useState(\n    useSelector(\n      (state) =>\n        state.characters.characters.filter(\n          (character) => character._id === match.params.id\n        )[0]\n    )\n  )\n\n  const [characterClasses, setCharacterClasses] = useState(null)\n\n  const getClass = async () => {\n    try {\n      const response = await axios.get(`http://localhost:5000/api/classes`)\n      setCharacterClasses(response.data)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n  useEffect(() => {\n    getClass()\n  }, [])\n\n  // console.log(characterClass)\n  // console.log(character)\n  if (!characterClasses) {\n    return <div></div>\n  }\n\n  const onSubmit = (e) => {\n    e.preventDefault()\n\n    dispatch(updateCharacter(character, history))\n  }\n\n  if (!character) {\n    return <div></div>\n  }\n\n  return (\n    <div>\n      <form onSubmit={onSubmit}>\n        <div className='container'>\n          <div className='row'>\n            <div className='col s6'>\n              <div className='input-field col s4'>\n                <input\n                  id='characterName'\n                  type='text'\n                  value={character.name}\n                  onChange={(e) =>\n                    setCharacter({ ...character, name: e.target.value })\n                  }\n                />\n                <label className='active'>CHARACTER NAME:</label>\n              </div>\n              <div className='input-field col s4'>\n                <input\n                  id='level'\n                  type='text'\n                  value={character.level}\n                  onChange={(e) =>\n                    setCharacter({ ...character, level: e.target.value })\n                  }\n                />\n                <label className='active'>LEVEL:</label>\n              </div>\n            </div>\n          </div>\n\n          <div className='col s12 row'>\n            <div className='col s4'>\n              <label>Race Select</label>\n              <select\n                className='browser-default'\n                value={character.race}\n                onChange={(e) =>\n                  setCharacter({ ...character, race: e.target.value })\n                }\n              >\n                {/* <option value={characterRace} disabled>\n                Races\n              </option> */}\n                <option value='Aasimar'>Aasimar</option>\n                <option value='Dragonborn'>Dragonborn</option>\n                <option value='Dwarf'>Dwarf</option>\n                <option value='Elf'>Elf</option>\n                <option value='Gnome'>Gnome</option>\n                <option value='Half-Elf'>Half-Elf</option>\n                <option value='Half-Orc'>Half-Orc</option>\n                <option value='Halfling'>Halfling</option>\n                <option value='Human'>Human</option>\n                <option value='Tiefling'>Tiefling</option>\n              </select>\n            </div>\n\n            <div className='col s4'>\n              <label>Class Select</label>\n              <select\n                className='browser-default'\n                value={character.characterClass}\n                onChange={(e) =>\n                  setCharacter({ ...character, characterClass: e.target.value })\n                }\n              >\n                {characterClasses.results.map((c, i) => (\n                  <option key={i} value={c.index}>\n                    {c.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div className='col s4'>\n              <label>Alignment Select</label>\n              <select\n                className='browser-default'\n                value={character.alignment}\n                onChange={(e) =>\n                  setCharacter({ ...character, alignment: e.target.value })\n                }\n              >\n                {/* <option value={characterAlignment} disabled>\n                Alignments\n              </option> */}\n                <option value='Lawful good'>Lawful good</option>\n                <option value='Lawful neutral'>Lawful neutral</option>\n                <option value='Lawful evil'>Lawful evil</option>\n                <option value='Neutral good'>Neutral good</option>\n                <option value='Neutral'>Neutral</option>\n                <option value='Neutral evil'>Neutral evil</option>\n                <option value='Chaotic good'>Chaotic good</option>\n                <option value='Chaotic neutral'>Chaotic neutral</option>\n                <option value='Chaotic evil'>Chaotic evil</option>\n              </select>\n            </div>\n          </div>\n          <div className='row right'>\n            <div className='col'>\n              <button\n                className='btn waves-effect waves-light  grey darken-1 myBtn'\n                style={{ marginTop: \"2em\" }}\n                name='action'\n                onClick={() => history.push(\"/home\")}\n              >\n                Cancel\n                <i className='material-icons right'>cancel</i>\n              </button>\n            </div>\n            <div className='col '>\n              <button\n                className='btn waves-effect waves-light red darken-4 myBtn'\n                style={{ marginTop: \"2em\" }}\n                type='submit'\n                name='action'\n                onClick={(e) => {\n                  e.preventDefault()\n                  dispatch(deleteCharacter(character._id, history))\n                }}\n              >\n                Delete\n                <i className='material-icons right'>delete</i>\n              </button>\n            </div>\n            <div className='col '>\n              <button\n                className='btn waves-effect waves-light green darken-4 myBtn'\n                style={{ marginTop: \"2em\" }}\n                type='submit'\n                name='action'\n              >\n                Save\n                <i className='material-icons right'>send</i>\n              </button>\n            </div>\n          </div>\n        </div>\n      </form>\n      {/* <button onClick={(e) => dispatch(deleteCharacter(character._id))}>TestDeletebutton</button> */}\n    </div>\n  )\n}\n\nexport default Character\n","import React from 'react'\n\nexport default function Settings() {\n    return ( \n <div className=\"container\">\n    <h5>Dark mode</h5>\n    <div className=\"switch\">\n    <label>\n      Off\n      <input type=\"checkbox\"/>\n      <span className=\"lever\"></span>\n      On\n    </label>\n  </div>\n</div>\n    )\n}\n","import React from \"react\"\nimport { Link } from \"react-router-dom\"\nimport { useSelector } from \"react-redux\"\n\nconst Games = () => {\n  const games = useSelector((state) => state.games.games)\n\n  return (\n    <div className='container'>\n      <ul className='collection with-header'>\n        <li className='collection-header brown lighten-5'>\n          <h5>Games</h5>\n        </li>\n\n        {games.map((game, i) => (\n          <Link key={i} to={`game/${game._id}`}>\n            <li\n              className='collection-item'\n              style={{\n                fontSize: \"1.1em\",\n                marginTop: \"0.5em\",\n                backgroundColor: i % 2 !== 0 ? \"#efebe9\" : \"\",\n              }}\n            >\n              {game.name}\n            </li>\n          </Link>\n        ))}\n      </ul>\n    </div>\n  )\n}\n\nexport default Games\n","import React from \"react\"\nimport { useSelector } from \"react-redux\"\n\nconst Game = ({ match }) => {\n  const game = useSelector(\n    (state) =>\n      state.games.games.filter((game) => game._id === match.params.id)[0]\n  )\n  const characters = useSelector((state) => state.characters.characters)\n  const player = useSelector((state) => state.auth.player)\n\n  // console.log(game)\n  // console.log(character)\n  if (!game || !characters) {\n    return <div></div>\n  }\n  // console.log(\"Peli\", game)\n  return (\n    <div className='container'>\n      <div className='dragonIcon'>\n        <i className='fas fa-dragon'></i>\n      </div>\n      <div className='row'>\n        <div className='col s12 m6'>\n          <div className='card-panel brown lighten-2'>\n            <h6>Dungeon master</h6>\n            <span className='white-text'>{game.dungeonmaster.username}</span>\n            <h6>Game name</h6>\n            <span className='white-text'>{game.name}</span>\n            <h6>Your character in this game</h6>\n            {/* Katsoo pelin characterit ja etsii listasta itselleen kuuluvat characterin vertailemalla char id:tä */}\n            {game.characters.map((character, i) => {\n              if (characters.some((char) => character._id === char._id)) {\n                return (\n                  <span key={i} className='white-text'>\n                    {character.name}{\" \"}\n                  </span>\n                )\n              }\n            })}\n            <h6> Game description</h6>\n            <span className='white-text'>{game.description}</span>\n          </div>\n        </div>\n        {/* Piirtää kuvan, jos ehto täyttyy ei enään erroria gameFile.type */}\n        {game.gameFile && (\n          <img\n            className='uploadImg'\n            src={`data:${game.gameFile.type};base64,${atob(\n              game.gameFile.data\n            )}`}\n            alt='uploaded'\n          />\n        )}\n        {/*  */}\n        {/* <div className='col s12 m6'>\n          <div className='card-panel brown lighten-2'>\n            <h6> Game description</h6>\n            <span className='white-text'>{game.description}</span>\n          </div>\n        </div> */}\n      </div>\n      {/* Piirtää kuvan, jos ehto täyttyy ei enään erroria gameFile.type\n      {game.gameFile && (\n        <img\n          className='uploadImg'\n          src={`data:${game.gameFile.type};base64,${atob(game.gameFile.data)}`}\n          alt='uploaded'\n        />\n      )} */}\n    </div>\n  )\n}\nexport default Game\n","import {\n  SET_GAMES,\n  ADD_GAME,\n  GET_ERRORS,\n  CLEAR_ERRORS,\n  DELETE_GAME,\n} from \"./types\"\nimport axios from \"axios\"\nimport { validateAddGame } from \"../utils/validator\"\nimport BASE_URL from \"../utils/baseurl\"\n\n// Ei tartte id tai gamesData parametria, koska axios middleware lähettää tokenin automaattisesti\nexport const getGames = () => async (dispatch) => {\n  // console.log(\"GetGamesAction\")\n  try {\n    const res = await axios.get(BASE_URL + \"/api/games\")\n    // console.log(\"GET_GAMES:\", res.data)\n    dispatch({\n      type: SET_GAMES,\n      payload: res.data,\n    })\n  } catch (err) {\n    console.log(err)\n  }\n}\n\nexport const addGame = (gameData, history, quick) => async (dispatch) => {\n  try {\n    const errors = validateAddGame(gameData)\n    console.log(errors)\n    if (errors.name) {\n      dispatch({\n        type: GET_ERRORS,\n        payload: errors,\n      })\n      setTimeout(() => {\n        dispatch({\n          type: CLEAR_ERRORS,\n        })\n      }, 5000)\n    } else {\n      const res = await axios.post(BASE_URL + \"/api/games\", gameData)\n      dispatch({\n        type: ADD_GAME,\n        payload: res.data,\n      })\n      console.log(\"Game added successfully\")\n      if (!quick) history.push(\"/home\")\n    }\n  } catch (err) {\n    console.log(err)\n  }\n}\n\nexport const joinGame = (gameId, characterId, history) => async (dispatch) => {\n  try {\n    if (!characterId || characterId === \"\") {\n      dispatch({\n        type: GET_ERRORS,\n        payload: { characterSelect: \"No character selected\" },\n      })\n      setTimeout(() => {\n        dispatch({\n          type: CLEAR_ERRORS,\n        })\n      }, 5000)\n    } else {\n      const res = await axios.post(\n        // se body {character: characterId}\n        BASE_URL + `/api/games/join/${gameId}`,\n        { character: characterId }\n      )\n      dispatch({\n        type: ADD_GAME,\n        payload: res.data,\n      })\n      console.log(\"Game added successfully\")\n      history.push(\"/home\")\n    }\n  } catch (err) {\n    console.log(err)\n  }\n}\n\nexport const deleteGame = (id, history) => async (dispatch) => {\n  try {\n    const res = await axios.delete(BASE_URL + `/api/games/${id}`)\n    dispatch({\n      type: DELETE_GAME,\n      payload: res.data._id,\n    })\n    console.log(\"Game deleted successfully\")\n    history.push(\"/dungeonmaster\")\n  } catch (err) {\n    console.log(err)\n  }\n}\n","import React, { useEffect, useRef, useState } from \"react\"\nimport { Link, useHistory } from \"react-router-dom\"\nimport { useSelector, useDispatch } from \"react-redux\"\nimport { addGame } from \"../../actions/gameActions\"\n\nexport default function CreateGame() {\n  const errors = useSelector((state) => state.errors)\n  const games = useSelector((state) => state.games.games)\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const [name, setName] = useState(\"\")\n  const [description, setDescription] = useState(\"\")\n  const [file, setFile] = useState({ type: \"\", data: \"\" })\n  // const gameFile = useRef()\n\n  const onChange = (e) => {\n    console.log(e.target.name)\n    switch (e.target.name) {\n      case \"name\":\n        setName(e.target.value)\n        break\n      case \"description\":\n        setDescription(e.target.value)\n        break\n      case \"image\":\n        console.log(e.target)\n        if (!e.target || !e.target.files || e.target.files.length === 0) return\n        const file = e.target.files[0]\n        console.log(file)\n        if (file) {\n          console.log(\"lolo\")\n          const reader = new FileReader()\n          reader.onload = (e) => {\n            console.log(e)\n            setFile({ type: file.type, data: btoa(e.target.result) })\n          }\n\n          reader.readAsBinaryString(file)\n        }\n        break\n      default:\n        break\n    }\n  }\n  const onSubmit = (e) => {\n    e.preventDefault()\n    // console.log(gameFile.current.files[0])\n\n    const newGame = {\n      name,\n      description,\n      gameFile: JSON.stringify(file),\n      // gameFile: JSON.stringify(gameFile.current.files[0]),\n    }\n    // console.log(newGame)\n    dispatch(addGame(newGame, history, null))\n  }\n\n  useEffect(() => {\n    console.log(file)\n  }, [file])\n  return (\n    <div className='container'>\n      <form\n        onSubmit={onSubmit}\n        encType='multipart/form-data'\n        onChange={onChange}\n      >\n        <div className='row'>\n          <div className='input-field col s8'>\n            <i className='material-icons prefix'>people</i>\n            <input\n              id='icon_prefix'\n              type='text'\n              name='name'\n              className={errors.name ? \"invalid\" : \"\"}\n              // value={name}\n              // onChange={(e) => setName(e.target.value)}\n            />\n            <label className={name !== \"\" ? \"active\" : \"\"}>Game Name</label>\n          </div>\n          <div className='file-field input-field col s4 right'>\n            <div className='btn'>\n              <span>File</span>\n              <input\n                type='file'\n                // ref={gameFile}\n                id='image'\n                name='image'\n              />\n            </div>\n            <div className='file-path-wrapper'>\n              <input className='file-path validate' type='text' />\n            </div>\n          </div>\n        </div>\n        {/* <div className='row'> */}\n        {/* <form className='col s12'> */}\n        {/* <div className='row'> */}\n        <div className='input-field col s12'>\n          <i className='material-icons prefix'>description</i>\n          <textarea\n            id='icon_prefix2'\n            className='materialize-textarea'\n            // value={description}\n            name='description'\n            // onChange={(e) => setDescription(e.target.value)}\n          ></textarea>\n          <label>Game description</label>\n        </div>\n        {/* </div> */}\n        {/* </form> */}\n        {/* </div> */}\n\n        <button\n          className='btn waves-effect waves-light green darken-3 myBtn'\n          style={{ marginTop: \"2em\" }}\n          type='submit'\n          name='action'\n        >\n          Save\n          <i className='material-icons right'>send</i>\n        </button>\n      </form>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport default function TextFieldGroup({\n  value,\n  onChange,\n  className,\n  type,\n  name,\n  label,\n  error,\n}) {\n  return (\n    <div className=\"input-field\">\n      <input\n        value={value}\n        onChange={onChange}\n        className={error ? className + \" invalid\" : className}\n        type={type}\n        name={name}\n      />\n      <label>{label}</label>\n      {error && <div>{error}</div>}\n    </div>\n  )\n}\n","import React, { useState, useEffect } from \"react\"\nimport { Link, useHistory } from \"react-router-dom\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { loginUser } from \"../../actions/authActions\"\nimport TextFieldGroup from \"../common/TextFieldGroup\"\n\nconst Login = ({ redirect = \"/home\" }) => {\n  const auth = useSelector((state) => state.auth)\n  const errors = useSelector((state) => state.errors)\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n\n  const onSubmit = (e) => {\n    e.preventDefault()\n\n    const userData = {\n      username,\n      password,\n      errors: {},\n    }\n\n    dispatch(loginUser(userData, history, redirect))\n  }\n\n  useEffect(() => {\n    // console.log(auth)\n    if (auth.player) {\n      history.push(\"/home\")\n    }\n    // eslint-disable-next-line\n  }, [auth])\n\n  return (\n    <div className='container'>\n      <form onSubmit={onSubmit}>\n        <h1>Sign in</h1>\n        <TextFieldGroup\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n          className='input-field my-inputfield'\n          type='text'\n          name='username'\n          label='Username'\n          error={errors.username}\n        />\n\n        <TextFieldGroup\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          className='input-field my-inputfield'\n          type='password'\n          name='password'\n          label='Password'\n          error={errors.password}\n        />\n\n        <button\n          className='btn waves-effect waves-light brown myBtn'\n          style={{ marginTop: \"2em\" }}\n          type='submit'\n          name='action'\n        >\n          Login\n          <i className='material-icons right'>send</i>\n        </button>\n        <div>\n          <Link\n            to='/register'\n            className='btn waves-effect waves-light brown myBtn'\n            style={{ marginTop: \"2em\" }}\n          >\n            Register\n          </Link>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default Login\n","import React, { useState, useEffect } from \"react\"\nimport { Link, useHistory } from \"react-router-dom\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { registerUser } from \"../../actions/authActions\"\nimport TextFieldGroup from \"../common/TextFieldGroup\"\n// Note to self withRouter doesn't work with functional components\n// Perhaps they work\n\nconst Register = () => {\n  const auth = useSelector((state) => state.auth)\n  const errors = useSelector((state) => state.errors)\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [passwordTwo, setPasswordTwo] = useState(\"\")\n\n  const onSubmit = (e) => {\n    e.preventDefault()\n\n    const newPlayer = {\n      username,\n      password,\n      passwordTwo,\n      errors: {},\n    }\n\n    dispatch(registerUser(newPlayer, history))\n  }\n\n  useEffect(() => {\n    if (auth.player) {\n      // Cheking that if the user is logged in\n      // If thats true then redirect player to home\n      history.push(\"/home\")\n    }\n    // eslint-disable-next-line\n  }, [])\n  console.log(errors)\n  return (\n    <div className=\"container\">\n      {/* {errors.length > 0 && <h1>KAKKA</h1>} */}\n      <form onSubmit={onSubmit}>\n        <h1>Register</h1>\n\n        <TextFieldGroup\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n          className=\"input-field my-inputfield\"\n          type=\"text\"\n          name=\"username\"\n          label=\"Username\"\n          error={errors.username}\n        />\n\n        <TextFieldGroup\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          className=\"input-field my-inputfield\"\n          type=\"password\"\n          name=\"password\"\n          label=\"Password\"\n          error={errors.password}\n        />\n\n        <TextFieldGroup\n          value={passwordTwo}\n          onChange={(e) => setPasswordTwo(e.target.value)}\n          className=\"input-field my-inputfield\"\n          type=\"password\"\n          name=\"passwordTwo\"\n          label=\"Confirm password\"\n          error={errors.password}\n        />\n\n        <button\n          className=\"btn waves-effect waves-light brown myBtn\"\n          style={{ marginTop: \"2em\" }}\n          type=\"submit\"\n          name=\"action\"\n          disabled={password !== passwordTwo && password.length === 0}\n        >\n          Register\n          <i className=\"material-icons right\">send</i>\n        </button>\n        <div>\n          <Link\n            to=\"/\"\n            className=\"btn waves-effect waves-light brown myBtn\"\n            style={{ marginTop: \"2em\" }}\n          >\n            Login\n          </Link>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default Register\n","import React from \"react\"\n\nfunction Spinner() {\n  return (\n    <div>\n      <div className='preloader-wrapper small active'>\n        <div className='spinner-layer spinner-green-only'>\n          <div className='circle-clipper left'>\n            <div className='circle'></div>\n          </div>\n          <div className='gap-patch'>\n            <div className='circle'></div>\n          </div>\n          <div className='circle-clipper right'>\n            <div className='circle'></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Spinner\n","import React, { useCallback, useEffect, useState } from \"react\"\nimport M from \"materialize-css/dist/js/materialize.min.js\"\nimport axios from \"axios\"\nimport Spinner from \"../common/Spinner\"\n// Modalin ongelma aluksi oli se että se häiriinty muista tiloista ja sammu. Fixattu että se kutsuu parent componentin tilaa vasta, kun se suljettaan.\nfunction SpellsModal({ characterSpells, setParentSpells, parentSpells }) {\n  const [activeSpell, setActiveSpell] = useState(null)\n  // Tässä komponentissa pidetään kirjaa valituista spelleistä. Acceptissa lähetetään parentcomponenttiin\n  const [spells, setSpells] = useState(parentSpells)\n  // Fail cleanup try\n  //   useEffect(() => {\n  //     return () => {\n  //       setParentSpells(spells)\n  //     }\n  //   }, [])\n\n  // Kun parentSpells muuttuu niin kutsumalla setSpells päivitetään spells\n  useEffect(() => {\n    setSpells(parentSpells)\n  }, [parentSpells])\n\n  useEffect(() => {\n    console.log(spells)\n  }, [spells])\n  //   let instance = null\n\n  //   const modalRef = useCallback((elem) => {\n  //     instance = M.Modal.init(elem, {\n  //       inDuration: 0,\n  //       outDuration: 0,\n  //     })\n  //     activeSpell && instance && instance.open()\n  //     // i.open()\n  //   })\n\n  // document.addEventListener('DOMContentLoaded', function() {\n  //   var elems = document.querySelectorAll('.modal');\n  //   var instances = M.Modal.init(elems, options);\n  // });\n  // Reffiä ei voi käyttää useEffectissä, koska se ei re-renderöi\n  const collapsibleRef = useCallback((elem) => {\n    M.Collapsible.init(elem, {\n      // inDuration: 3000,\n      onOpenStart: async (elem) => {\n        // console.log(elem.id)\n\n        try {\n          const res = await axios.get(\n            \"http://localhost:5000/api/spells/\" + elem.id\n          )\n          setActiveSpell(res.data)\n        } catch (e) {\n          console.log(e)\n          setActiveSpell(null)\n        }\n      },\n    })\n    // console.log(elem)\n  })\n  return (\n    <div>\n      {/* <!-- Modal Trigger --> */}\n      <a\n        href='#spells-modal'\n        className='waves-effect waves-light btn modal-trigger'\n\n        // onClick={(e) => {\n        //   instance.open()\n        //   // e.stopPropagation()\n        // }}\n        // onChange={(e) => e.stopPropagation()}\n      >\n        {/* {characterSpells & characterSpells.count} */}\n        Spells ({characterSpells ? characterSpells.count : 0})\n      </a>\n\n      {/* <!-- Modal Structure --> */}\n      <div\n        id='spells-modal'\n        className='modal modal-fixed-footer'\n        style={modalStyle}\n      >\n        <div className='modal-content'>\n          {/* <h4>{c.index}</h4> */}\n\n          <ul className='collapsible' ref={collapsibleRef}>\n            {characterSpells &&\n              characterSpells.results.map((c, i) => (\n                <li key={i} value={c.index} id={c.index}>\n                  <div className='row'>\n                    <div className='col s11'>\n                      <div\n                        className='collapsible-header'\n                        style={{ justifyContent: \"space-between\" }}\n                        // onClick={() => console.log(\"headerklik\")}\n                      >\n                        {/* <i className='material-icons'>star_border</i> */}\n                        <div>{c.name}</div>\n                      </div>\n                    </div>\n                    <div\n                      className='col s1 valign-wrapper'\n                      style={{ height: \"53px\" }}\n                    >\n                      <label>\n                        <input\n                          type='checkbox'\n                          className='filled-in'\n                          style={{ zIndex: 99 }}\n                          //value={c.index}\n                          onChange={(e) => {\n                            //e.preventDefault()\n\n                            // Checkboxin tila muuttuu on/off, jos spells-listalta\n                            // löytyy tämä spelli, tiedetään että checkbox on\n                            // menossa off-asentoon, joten poistetaan kyseinen spelli\n                            // listalta, muussa tapauksessa lisätään\n                            if (spells.includes(c.index)) {\n                              setSpells(\n                                spells.filter((spell) =>\n                                  spell === c.index ? false : true\n                                )\n                              )\n                            } else {\n                              setSpells([...spells, c.index])\n                            }\n                            // console.log(spells)\n                          }}\n                          checked={spells.includes(c.index) ? true : false}\n                          // onChange={(e) => e.stopPropagation()}\n                          // onClick={(e) => {\n                          //   console.log(\"klikcheckbox\")\n                          //   e.stopPropagation()\n                          // }}\n                        />\n                        <span\n                          // onClick={(e) => e.stopPropagation()}\n                          className='right'\n                        ></span>\n                      </label>\n                    </div>\n                  </div>\n                  <div className='collapsible-body'>\n                    <span>{activeSpell ? activeSpell.desc : <Spinner />}</span>\n                  </div>\n                </li>\n              ))}\n          </ul>\n        </div>\n        <div className='modal-footer'>\n          <button\n            onClick={(e) => {\n              e.preventDefault()\n              setParentSpells(spells)\n            }}\n            href='#!'\n            className='modal-close waves-effect waves-green btn-flat'\n          >\n            Accept\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst modalStyle = {\n  width: \"75%\",\n  height: \"75%\",\n}\n\nexport default SpellsModal\n","import React, { useEffect, useState } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { addCharacter } from \"../../actions/characterActions\"\nimport M from \"materialize-css/dist/js/materialize.min.js\"\nimport BASE_URL from \"../../utils/baseurl\"\nimport axios from \"axios\"\n// import Spinner from \"../common/Spinner\"\nimport SpellsModal from \"./SpellsModal\"\n\n// Todo: Subrace(Dwarf => Hill Dwarf) & languages, experience points, background\n\nconst CreateCharacter = () => {\n  // const characters = useSelector((state) => state.characters)\n  const errors = useSelector((state) => state.errors)\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const [name, setName] = useState(\"\")\n  const [race, setRace] = useState(\"0\")\n  const [characterClass, setCharacterClass] = useState(\"\")\n  // Cannot read property 'map' of undefined. Ylhäältä alas, koska characterClasses.result ei ole vielä olemassa ni tyhjä divi\n  const [characterClasses, setCharacterClasses] = useState(null)\n  const [characterSpells, setCharacterSpells] = useState(null)\n  const [level, setLevel] = useState(\"\")\n  const [spells, setSpells] = useState([])\n  const [alignment, setAlignment] = useState(\"0\")\n  // const [activeSpell, setActiveSpell] = useState(null)\n\n  const getClass = async () => {\n    try {\n      const response = await axios.get(BASE_URL + `/api/classes`)\n      setCharacterClasses(response.data)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  const getSpell = async () => {\n    if (characterClass === \"\") return\n    try {\n      const response = await axios.get(\n        BASE_URL + `/api/classes/${characterClass}/spells`\n      )\n      setCharacterSpells(response.data)\n      // console.log(response.data)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n  useEffect(() => {\n    // Init Materialize JS\n    M.AutoInit()\n  })\n  // Hateaan spellit vasta kun valitaan joku classi\n  useEffect(() => {\n    getClass()\n    // getSpell()\n  }, [])\n\n  useEffect(() => {\n    // console.log(spells)\n  }, [spells])\n  useEffect(() => {\n    // getClass()\n    getSpell()\n    setSpells([])\n  }, [characterClass])\n  // console.log(characterClass)\n  // console.log(characterSpells)\n\n  const onSubmit = (e) => {\n    e.preventDefault()\n\n    const newCharacter = {\n      name,\n      race,\n      characterClass,\n      level,\n      alignment,\n      spells,\n      // errors: {},\n    }\n\n    dispatch(addCharacter(newCharacter, history))\n  }\n  // || characterClasses.length === 0)\n  if (!characterClasses) {\n    return <div></div>\n  }\n\n  return (\n    <div>\n      <form onSubmit={onSubmit}>\n        <div className='container'>\n          <div className='row'>\n            <div className='col s6'>\n              <div className='input-field col s4'>\n                <input\n                  className={errors.name ? \"invalid\" : \"\"}\n                  id='characterName'\n                  type='text'\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                />\n                <label>CHARACTER NAME:</label>\n              </div>\n              <div className='input-field col s4'>\n                <input\n                  className={errors.level ? \"invalid\" : \"\"}\n                  id='level'\n                  type='text'\n                  value={level}\n                  onChange={(e) => setLevel(e.target.value)}\n                />\n                <label>LEVEL:</label>\n              </div>\n            </div>\n          </div>\n\n          <div className='col s12 row'>\n            <div className='col s4'>\n              <label>Race Select</label>\n              <select\n                // className={`browser-default ${errors.race && \"invalid\"}`}\n                className='browser-default'\n                style={{ borderColor: errors.race ? \"red\" : \"\" }}\n                value={race}\n                onChange={(e) => setRace(e.target.value)}\n              >\n                <option value='0' disabled>\n                  Races\n                </option>\n                <option value='Aasimar'>Aasimar</option>\n                <option value='Dragonborn'>Dragonborn</option>\n                <option value='Dwarf'>Dwarf</option>\n                <option value='Elf'>Elf</option>\n                <option value='Gnome'>Gnome</option>\n                <option value='Half-Elf'>Half-Elf</option>\n                <option value='Half-Orc'>Half-Orc</option>\n                <option value='Halfling'>Halfling</option>\n                <option value='Human'>Human</option>\n                <option value='Tiefling'>Tiefling</option>\n              </select>\n            </div>\n\n            <div className='col s4'>\n              <label>Class Select</label>\n              <select\n                className='browser-default'\n                style={{ borderColor: errors.characterClass ? \"red\" : \"\" }}\n                value={characterClass}\n                onChange={(e) => {\n                  setCharacterClass(e.target.value)\n                }}\n              >\n                <option value='' disabled>\n                  Classes\n                </option>\n                {characterClasses.results.map((c, i) => (\n                  <option key={i} value={c.index}>\n                    {c.name}\n                  </option>\n                ))}\n                {/* <option value='Bard'>Bard</option>\n                <option value='Cleric'>Cleric</option>\n                <option value='Druid'>Druid</option>\n                <option value='Other'>Other</option>\n                <option value='Paladin'>Paladin</option>\n                <option value='Ranger'>Ranger</option>\n                <option value='Sorcerer'>Sorcerer</option>\n                <option value='Warlock'>Warlock</option>\n                <option value='Wizard'>Wizard</option> */}\n              </select>\n            </div>\n\n            <div className='col s4'>\n              <label>Alignment Select</label>\n              <select\n                className='browser-default'\n                value={alignment}\n                onChange={(e) => setAlignment(e.target.value)}\n              >\n                <option value='0' disabled>\n                  Alignments\n                </option>\n                <option value='Lawful good'>Lawful good</option>\n                <option value='Lawful neutral'>Lawful neutral</option>\n                <option value='Lawful evil'>Lawful evil</option>\n                <option value='Neutral good'>Neutral good</option>\n                <option value='Neutral'>Neutral</option>\n                <option value='Neutral evil'>Neutral evil</option>\n                <option value='Chaotic good'>Chaotic good</option>\n                <option value='Chaotic neutral'>Chaotic neutral</option>\n                <option value='Chaotic evil'>Chaotic evil</option>\n              </select>\n            </div>\n          </div>\n          <SpellsModal\n            characterSpells={characterSpells}\n            setParentSpells={setSpells}\n            parentSpells={spells}\n          />\n\n          <div className='row right'>\n            <div className='col'>\n              <button\n                className='btn waves-effect waves-light  grey darken-1 myBtn'\n                style={{ marginTop: \"2em\" }}\n                name='action'\n                onClick={() => history.push(\"/home\")}\n              >\n                Cancel\n                <i className='material-icons right'>cancel</i>\n              </button>\n            </div>\n            <div className='col '>\n              <button\n                className='btn waves-effect waves-light green darken-4 myBtn'\n                style={{ marginTop: \"2em\" }}\n                type='submit'\n                name='action'\n              >\n                Save\n                <i className='material-icons right'>send</i>\n              </button>\n            </div>\n          </div>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default CreateCharacter\n","// Todo: List my games(as a dungeon master)\n\nimport React, { useState } from \"react\"\nimport { Link, useHistory } from \"react-router-dom\"\nimport { useSelector, useDispatch } from \"react-redux\"\nimport { addGame } from \"../../actions/gameActions\"\n\nconst DungeonMaster = () => {\n  const errors = useSelector((state) => state.errors)\n  // const games = useSelector((state) => state.games.games)\n  const player = useSelector((state) => state.auth.player)\n  const games = useSelector((state) =>\n    state.games.games.filter((game) => game.dungeonmaster._id === player.id)\n  )\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  // console.log(games)\n\n  const [name, setName] = useState(\"\")\n\n  const onSubmit = (e) => {\n    e.preventDefault()\n\n    const newGame = {\n      name,\n    }\n    dispatch(addGame(newGame, history, true))\n    setName(\"\")\n  }\n\n  return (\n    <div className='container'>\n      <form onSubmit={onSubmit}>\n        <div className=''>\n          <Link to='/create-game'>Create a full game</Link>\n          <p>Quick start a new game</p>\n        </div>\n        <div className='input-field col s6'>\n          <i className='material-icons prefix'>people</i>\n          <input\n            id='icon_prefix'\n            type='text'\n            className={errors.name ? \"invalid\" : \"\"}\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n          <label className={name !== \"\" ? \"active\" : \"\"}>Game Name</label>\n          <button\n            className='btn waves-effect waves-light green darken-3 myBtn'\n            style={{ marginTop: \"2em\" }}\n            type='submit'\n            name='action'\n          >\n            Save\n            <i className='material-icons right'>send</i>\n          </button>\n        </div>\n      </form>\n\n      <ul className='collection with-header'>\n        <li className='collection-header brown lighten-5'>\n          <h5>Your adventures</h5>\n        </li>\n        {games.map((game, i) => (\n          <Link key={i} to={`game-info/${game._id}`}>\n            <li\n              className='collection-item'\n              style={{\n                fontSize: \"1.1em\",\n                marginTop: \"0.5em\",\n                backgroundColor: i % 2 !== 0 ? \"#efebe9\" : \"\",\n              }}\n            >\n              {game.name}\n            </li>\n          </Link>\n        ))}\n      </ul>\n    </div>\n  )\n}\n\nexport default DungeonMaster\n","import React from \"react\"\nimport { useSelector } from \"react-redux\"\n\nexport default function WelcomeBar() {\n  const player = useSelector((state) => state.auth.player)\n  // console.log(player)\n\n  if (!player) {\n    return <div></div>\n  }\n  return (\n    <div className='container' style={{ marginBottom: \"1.5em\" }}>\n      <h5 className='welcomeText'>\n        Welcome,{\"  \"}{\" \"}\n        <span className='playerWelcomeName'>\n          {player.username}\n          {\"  \"}{\" \"}\n        </span>\n        <span style={{ fontSize: \"25px\", color: \"Mediumslateblue\" }}>\n          <i className='fas fa-hat-wizard'></i>\n        </span>\n        <br></br>Are you ready to start your adventure?{\"  \"}\n        {\"  \"}\n      </h5>\n    </div>\n  )\n}\n","// For DM to see\nimport React from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { deleteGame } from \"../../actions/gameActions\"\nimport BASE_URL from \"../../utils/baseurl\"\n// Todo: Tarina (Peruskuvaus, karttakuva), Muut pelaajat,\n// Ehtolause jos DM näyttää  DM jutut\n\nexport default function GameInfo({ match }) {\n  const dispatch = useDispatch()\n  const history = useHistory()\n  // Filtteröi peleistä pelin, jonka id on sama kuin urlin id ja ottaa listasta ensimmäisen\n  const game = useSelector(\n    (state) =>\n      state.games.games.filter((game) => game._id === match.params.id)[0]\n  )\n  const player = useSelector((state) => state.auth.player)\n  const characters = useSelector((state) => state.characters.characters)\n\n  // Räyh\n  if (!game) {\n    return <div></div>\n  }\n  // console.log(\"GAMEFILE:\", game.gameFile)\n  // console.log(\"Herepeli\")\n  return (\n    <div className='container'>\n      <div className='dragonIcon'>\n        <i className='fas fa-dragon'></i>\n      </div>\n      <div className='row'>\n        <div className='col s6'>\n          <div className='card-panel brown lighten-2'>\n            <h6>Dungeon master</h6>\n            <span\n              className='white-text'\n              style={{ textTransform: \"capitalize\" }}\n            >\n              {game.dungeonmaster.username}\n            </span>\n            <h6>Game name</h6>\n            <span\n              className='white-text'\n              style={{ textTransform: \"capitalize\" }}\n            >\n              {game.name}\n            </span>\n            <h6>Characters in this game</h6>\n            {game.characters.map((character, i) => (\n              <span key={i} className='white-text'>\n                {character.name} -{\" \"}\n              </span>\n            ))}\n\n            <h6> Game description</h6>\n            <span className='white-text'>{game.description}</span>\n          </div>\n        </div>\n\n        {/* Piirtää kuvan, jos ehto täyttyy ei enään erroria gameFile.type */}\n        {game.gameFile && (\n          <img\n            className='uploadImg'\n            src={`data:${game.gameFile.type};base64,${atob(\n              game.gameFile.data\n            )}`}\n            alt='uploaded'\n          />\n        )}\n\n        {/* <div className='col s6'>\n          <div className='card-panel brown lighten-2'>\n            <h6> Game description</h6>\n            <span className='white-text'>{game.description}</span>\n          </div>\n        </div> */}\n      </div>\n      {/* Piirtää kuvan, jos ehto täyttyy ei enään erroria gameFile.type\n      {game.gameFile && (\n        <img\n          className='uploadImg'\n          src={`data:${game.gameFile.type};base64,${atob(game.gameFile.data)}`}\n          alt='uploaded'\n        />\n      )} */}\n      <div className='row'>\n        <div className='col s12'>\n          <div className='card-panel brown lighten-2'>\n            <h6> Share this invite to people to join:</h6>\n            <span className='white-text'>\n              {BASE_URL + `/joingame/${game._id}?secret=${game.secret}`}\n            </span>\n            <button\n              className='waves-effect waves-light btn-small'\n              style={{ marginLeft: \"3.5em\", backgroundColor: \"mediumpurple\" }}\n              onClick={() =>\n                navigator.clipboard.writeText(\n                  BASE_URL + `/joingame/${game._id}?secret=${game.secret}`\n                )\n              }\n            >\n              Copy\n            </button>\n          </div>\n        </div>\n      </div>\n      <div className='col '>\n        <button\n          className='btn waves-effect waves-light red darken-4 myBtn'\n          style={{ marginTop: \"2em\" }}\n          type='submit'\n          name='action'\n          onClick={(e) => {\n            e.preventDefault()\n            dispatch(deleteGame(game._id, history))\n          }}\n        >\n          Delete\n          <i className='material-icons right'>delete</i>\n        </button>\n      </div>\n    </div>\n  )\n}\n","import React, { useEffect, useState } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { useSelector, useDispatch } from \"react-redux\"\nimport axios from \"../../utils/axiosService\"\nimport Login from \"../auth/Login\"\n\nimport { joinGame } from \"../../actions/gameActions\"\nimport BASE_URL from \"../../utils/baseurl\"\n// Todo: Näytä punanen korostus errori, jos hahmo on liittyny peliin\n// Todo: luo hahmo vaihtoehto, jos ei ole hahmoa\n\nexport default function JoinGame({ match, location }) {\n  // Filtteröi peleistä pelin, jonka id on sama kuin urlin id ja ottaa listasta ensimmäisen\n  // const game = useSelector(\n  //   (state) =>\n  //     state.games.games.filter((game) => game._id === match.params.id)[0]\n  // )\n\n  const auth = useSelector((state) => state.auth)\n\n  const [game, setGame] = useState(null)\n  const secret = new URLSearchParams(location.search).get(\"secret\")\n  // console.log(secret)\n  // const player = useSelector((state) => state.auth.player)\n  const characters = useSelector((state) => state.characters.characters)\n  const [character, setCharacter] = useState(\"\")\n\n  const dispatch = useDispatch()\n  const history = useHistory()\n  console.log(history.location)\n  const onSubmit = () => {\n    dispatch(joinGame(game._id, character, history))\n  }\n\n  const getGame = async () => {\n    try {\n      const game = await axios.get(\n        BASE_URL + `/api/games/${match.params.id}/${secret}`\n      )\n      setGame(game.data)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n  useEffect(() => {\n    getGame()\n    // eslint-disable-next-line\n  }, [auth])\n  // console.log(game)\n\n  const notAuthed = () => {\n    if (!auth.player) {\n      return (\n        // <Login redirect={history.location.pathname + history.location.search} />\n        <Login redirect={false} />\n      )\n    }\n  }\n  // Palauttaa tyhjän kunnes peli on haettu\n  const authLinks = !game ? (\n    <div></div>\n  ) : (\n    <div className='container'>\n      <div className='dragonIcon'>\n        <i className='fas fa-dragon'></i>\n      </div>\n\n      <div className='row'>\n        <div className='col s12 m6'>\n          <div className='card-panel brown lighten-2'>\n            <h6>Dungeon master</h6>\n            <span className='white-text'>{game.dungeonmaster.username}</span>\n            <h6>Game name</h6>\n            <span className='white-text'>{game.name}</span>\n          </div>\n        </div>\n        {/*  */}\n        <div className='col s12 m6'>\n          <div className='card-panel brown lighten-2'>\n            <h6> Game description</h6>\n            <span className='white-text'>{game.description}</span>\n          </div>\n        </div>\n      </div>\n      <label className='joinGameHeader'>\n        Choose a character to join a game\n      </label>\n      <select\n        className='browser-default'\n        onChange={(e) => setCharacter(e.target.value)}\n        defaultValue=''\n      >\n        <option value='' disabled>\n          Choose your character\n        </option>\n        {characters.map((character) => (\n          <option key={character._id} value={character._id}>\n            {character.name}, {character.race} {character.characterClass}\n          </option>\n        ))}\n      </select>\n\n      <div className='row right'>\n        <button\n          onClick={onSubmit}\n          className='btn waves-effect waves-light green darken-4 myBtn'\n          style={{ marginTop: \"2em\" }}\n          type='submit'\n          name='action'\n          disabled={character === \"\"}\n        >\n          Join\n          <i className='material-icons right'>send</i>\n        </button>\n      </div>\n    </div>\n  )\n  // console.log(game)\n  return <div>{auth.player ? authLinks : notAuthed()}</div>\n}\n","import React, { Fragment, useEffect } from \"react\"\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\"\nimport jwt_decode from \"jwt-decode\"\nimport { setToken } from \"./utils/axiosService\"\nimport Navbar from \"./components/layouts/Navbar\"\nimport SearchBar from \"./components/layouts/SearchBar\"\nimport Characters from \"./components/characters/Characters\"\nimport Character from \"./components/characters/Character\"\nimport Settings from \"./components/settings/Settings\"\nimport Games from \"./components/games/Games\"\nimport Game from \"./components/games/Game\"\nimport CreateGame from \"./components/games/CreateGame\"\nimport Login from \"./components/auth/Login\"\nimport Register from \"./components/auth/Register\"\nimport CreateCharacter from \"./components/create-character/CreateCharacter\"\nimport DungeonMaster from \"./components/dungeonmaster/DungeonMaster\"\nimport \"materialize-css/dist/css/materialize.min.css\"\nimport M from \"materialize-css/dist/js/materialize.min.js\"\nimport \"./App.css\"\nimport WelcomeBar from \"./components/layouts/WelcomeBar\"\nimport { setCurrentPlayer } from \"./actions/authActions\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { getCharacters } from \"./actions/characterActions\"\nimport { getGames } from \"./actions/gameActions\"\nimport GameInfo from \"./components/games/GameInfo\"\nimport JoinGame from \"./components/games/JoinGame\"\n\nfunction App() {\n  const dispatch = useDispatch()\n  const player = useSelector((state) => state.auth.player)\n  useEffect(() => {\n    // console.log(localStorage.accessToken)\n    // Check for token from localStorage (logic for refreshing the page so the token doesn't disappear)\n    if (localStorage.accessToken) {\n      // Set auth token header auth\n      setToken(localStorage.accessToken)\n      // Decode token and get user info and exp\n      const decoded = jwt_decode(localStorage.accessToken)\n      // Set user and isAuthenticated\n      // console.log(decoded)\n      dispatch(setCurrentPlayer(decoded.player))\n\n      //   // Check for expired token\n      //   const currentTime = Date.now() / 1000;\n      //   if (decoded.exp < currentTime) {\n      //     // If the expiration time is less than the current time\n      //     // Logout user\n      //     dispatch(logoutUser());\n      //     // TODO: Clear current profile\n      //     store.dispatch(clearCurrentProfile());\n      //     // Redirect to login\n      //     window.location.href = \"/login\";\n      //   }\n    }\n  }, [])\n\n  useEffect(() => {\n    // If player is not logged in, do nothing\n    if (!player) return\n    // Get data from backend to Redux immediately on first render\n    dispatch(getCharacters())\n    dispatch(getGames())\n  }, [player])\n  useEffect(() => {\n    // Init Materialize JS\n    M.AutoInit()\n  })\n  return (\n    <Router>\n      <Fragment>\n        <Navbar />\n        <Switch>\n          <Route exact path='/' component={Login} />\n          <Route exact path='/register' component={Register} />\n          <Route\n            exact\n            path='/home'\n            render={() => (\n              <div className='container'>\n                <div className='dragonIcon'>\n                  <i className='fas fa-dragon'></i>\n                </div>\n                <SearchBar />\n                <WelcomeBar />\n\n                <Characters />\n                <Games />\n              </div>\n            )}\n          />\n\n          <Route exact path='/character/:id' component={Character} />\n          <Route exact path='/game/:id' component={Game} />\n          <Route exact path='/game-info/:id' component={GameInfo} />\n          <Route exact path='/create-character' component={CreateCharacter} />\n          <Route exact path='/dungeonmaster' component={DungeonMaster} />\n          <Route exact path='/settings' component={Settings} />\n          <Route exact path='/create-game' component={CreateGame} />\n          <Route exact path='/joingame/:id' component={JoinGame} />\n        </Switch>\n      </Fragment>\n    </Router>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { SET_CURRENT_PLAYER } from \"../actions/types\"\n\nconst initialState = {\n  player: null\n}\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case SET_CURRENT_PLAYER:\n      // console.log(action)\n      return {\n        ...state,\n        player: action.payload,\n      }\n    default:\n      return state\n  }\n}\n","import { GET_ERRORS, CLEAR_ERRORS } from \"../actions/types\"\n\nconst initialState = {}\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case GET_ERRORS:\n      return action.payload\n    case CLEAR_ERRORS:\n      // console.log(\"errorireducertoimii\")\n      return {}\n    default:\n      return state\n  }\n}\n","import {\n  ADD_CHARACTER,\n  SET_CHARACTERS,\n  UPDATE_CHARACTER,\n  DELETE_CHARACTER,\n} from \"../actions/types\"\n\nconst initialState = {\n  characters: [],\n}\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case ADD_CHARACTER:\n      return {\n        ...state,\n        // [...state.characters] = old array action.newCharacter new object to be added to array\n        characters: [action.newCharacter, ...state.characters],\n      }\n    case DELETE_CHARACTER:\n      // console.log(\"Delete Rducer\")\n      return {\n        ...state,\n        // Vanhasta listasta filtteröidään pois character, jonka id on annettu action.payloadina\n        characters: state.characters.filter(\n          (character) => character._id !== action.payload\n        ),\n      }\n    case SET_CHARACTERS:\n      // console.log(action)\n      return {\n        ...state,\n        // Asetetaan listaksi annettu lista (korvataan vanha lista uudella annetulla listalla)\n        characters: [...action.payload],\n      }\n    case UPDATE_CHARACTER:\n      console.log(action.payload)\n      return {\n        ...state,\n        // Jos on sama id niin päivitetään characteria, jos ei ole niin annetaan olla vanha\n        characters: state.characters.map((character) =>\n          character._id === action.payload._id ? action.payload : character\n        ),\n      }\n    default:\n      return state\n  }\n}\n","import { SET_GAMES, ADD_GAME, DELETE_GAME } from \"../actions/types\"\n\nconst initialState = {\n  games: [],\n}\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case SET_GAMES:\n      return {\n        ...state,\n        games: action.payload,\n      }\n    case ADD_GAME:\n      console.log(\"ADD REDUCER\", action)\n      return {\n        ...state,\n        games: [action.payload, ...state.games],\n      }\n    case DELETE_GAME:\n      return {\n        ...state,\n        // Vanhasta listasta filtteröidään pois peli, jonka id on annettu action.payloadina\n        games: state.games.filter((game) => game._id !== action.payload),\n      }\n\n    default:\n      return state\n  }\n}\n","import { combineReducers } from \"redux\"\nimport authReducer from \"./authReducer\"\nimport errorReducer from \"./errorReducer\"\nimport characterReducer from \"./characterReducer\"\nimport gameReducer from './gameReducer'\n\nexport default combineReducers({\n  auth: authReducer,\n  errors: errorReducer,\n  characters: characterReducer,\n  games: gameReducer,\n})\n","import { createStore, applyMiddleware } from \"redux\"\nimport { composeWithDevTools } from \"redux-devtools-extension\"\nimport thunk from \"redux-thunk\"\nimport rootReducer from \"./reducers/index\"\n\nconst initialState = {}\n\nconst middleware = [thunk]\n\nconst store = createStore(\n  rootReducer,\n  initialState,\n  composeWithDevTools(applyMiddleware(...middleware))\n)\n\nexport default store\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.css\"\nimport App from \"./App\"\nimport * as serviceWorker from \"./serviceWorker\"\nimport { Provider } from \"react-redux\"\nimport store from \"./store\"\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}